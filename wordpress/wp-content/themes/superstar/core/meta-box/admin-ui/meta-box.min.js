var ATMB=ATMB||{};ATMB.methods=function(e){var b=[{key:"page_template",selector:"#page_template"},{key:"page_testing",selector:"#post_id"}],d={page_template:null,page_testing:null},c=function(){for(var j=0;j<b.length;j++){if("page_template"===b[j].key){console.log(e(b[j].selector).val())}if("page_testing"===b[j].key){console.log("I'm just testing..")}}},h=function(){},g=function(){a();e("a.atmb-button-collapse").on("click",function(i){e("#"+e(this).data("toggle_class")).slideToggle("fast")})},a=function(i){i=i||e("ol.atmb-repeater-ol");i.pojo_sortable({opacity:0.6,cursor:"move",revert:true,handle:"div.row-sortable-handle",forceHelperSize:true,forcePlaceholderSize:true,scroll:true})},f=function(j,i){i=i||true;e(":input",j).each(function(){if(i){e(this).removeAttr("disabled")}else{e(this).attr("disabled","disabled")}})};return{init:g,initLocation:c,init_sortable:a}}(jQuery);jQuery(document).ready(function(b){ATMB.methods.init();function a(c,d){d=d||false;b(":input",c).each(function(){if(d){b(this).removeAttr("disabled")}else{b(this).attr("disabled","disabled")}})}b("a.atmb-btn-add-repeater-clone").on("click",function(h){h.preventDefault();var f=b(this).closest(".atmb-repeater-wrap"),g=f.find(".atmb-repeater-clone"),d=g.clone(),c=new Date;d.html(d.html().replace(/SKIP_FIELD/g,c.getTime())).removeClass("atmb-repeater-clone hidden").addClass("atmb-repeater-row");f.find("ol.atmb-repeater-ol").append(d);a(d,true);ATMB.methods.init_sortable()});b(document).on("click","a.atmb-btn-repeater-remove-row",function(c){if(confirm(POJO_ADMIN.lang_remove_row)){b(this).closest(".atmb-repeater-row").hide("fast").remove()}});a(b(".atmb-repeater-clone"));b("div.atmb-wrap-fields").on("change",".select-show-or-hide-fields :input",function(){if(b(this).prop("disabled")){return}if("radio"===b(this).attr("type")&&!b(this).prop("checked")){return}var f=b(this).val();if("checkbox"===b(this).attr("type")){f=b(this).prop("checked")?"on":"off"}var e=b(this).closest("div.atmb-wrap-fields"),c=b("div[data-show_on_"+b(this).attr("name")+"]",e),d=b("div[data-show_on_"+b(this).attr("name")+'="'+f+'"]',e);c.hide();a(c);a(d,true);d.slideDown("fast").find(":input").trigger("change")}).on("change",".update-wrap-on-change :input",function(){var c=b(this).closest("div.atmb-wrap-fields"),d=c.find(":input").serialize();b.post(ajaxurl,"post_id="+b("#post_ID").val()+"&action=atmb_update_wrap&reference="+b(this).attr("name")+"&"+d,function(e){if(e===""){return}c.html(e);b(".select-show-or-hide-fields :input").trigger("change")})});setTimeout(function(){b("div.atmb-wrap-fields .select-show-or-hide-fields :input").trigger("change")},400);b(document).on("click","div.at-upload-image-wrap a.at-image-upload",function(h){var g=b(this).closest("div.at-upload-image-wrap"),f=g.find("input.at-image-upload-field"),d=g.find("ul.at-image-ul-wrap"),i=b(this).closest("div.single-image"),c;c=wp.media.frames.downloadable_file=wp.media({title:"Add Image",button:{text:b(this).data("label_add_to_post")},library:{type:"image"},multiple:f.data("multiple")});c.on("select",function(){var e=c.state().get("selection"),j=f.val();e.map(function(l){l=l.toJSON();if(l.id){if(f.data("multiple")){j=j?j+","+l.id:l.id}else{j=l.id;b("li.image",d).remove();i.addClass("hidden")}var k=l.url;if(undefined!==l.sizes.large){k=l.sizes.large.url}d.append('<li class="image" data-attachment_id="'+l.id+'">   <img src="'+k+'" />   <a href="javascript:void(0);" class="image-delete button">Remove</a></li>')}});f.val(j)});c.open()}).on("click","a.image-delete",function(h){var f=b(this).closest("div.at-upload-image-wrap"),d=f.find("input.at-image-upload-field"),c=f.find("ul.at-image-ul-wrap"),i=f.find("div.single-image"),g="";b(this).closest("li.image").remove();b("li",c).each(function(){g=g?g+","+b(this).data("attachment_id"):b(this).data("attachment_id")});d.val(g);i.removeClass("hidden")})});